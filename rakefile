require './app'

task :migrate do
  DataMapper.auto_migrate!
end

task :create_admin, [:email, :pass] do |t, args|
   sh "ruby ./scripts/createAdmin.rb #{args.email} #{args.pass}"
end

task :create_db do
  file = File.open("./scripts/schema.sql", "rb")
  DB.run(file.read)
  file.close
end

task :seed_roles do
  Role.create(:nom => 'Admin')
  Role.create(:nom => 'Responsable')
  Role.create(:nom => 'Agent')
  Role.create(:nom => 'Technicien')
end


task :seed_statuts do
  Statut.create(:nom => 'Traitement')
  Statut.create(:nom => 'Approuvée')
  Statut.create(:nom => 'Rejetée')
  Statut.create(:nom => 'Exécutée')
end
